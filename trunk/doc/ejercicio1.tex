\subsection{Ejercicio 1}
\subsubsection{Layout Minix}
\imagen{img/LayoutMinix.png}{14}{Los niveles de MINIX}

\subsubsection{Kernel}
\begin{itemize}
\item SYS\_FORK: Informa al kernel que un proceso es forkeado
\item SYS\_NEWMAP: Permite al Memory Manager setear una porci'on de memoria para un proceso
\item SYS\_GETMAP: Permite al Memory Manager tomar una porci'on de memoria de un proceso
\item SYS\_EXEC: Setea el contador de programa y el puntero al stack luego de realizar un EXEC
\item SYS\_XIT: Informa al kernel que un proceso ha terminado
\item SYS\_GETSP: El llamador pide un el puntero al stack de un proceso
\item SYS\_TIMES: El llamador pide contar las veces de un proceso
\item SYS\_ABORT: Si el File System o el Memory Manager no pueden continuar. Aborta Minix
\item SYS\_FRESH: Empieza con una imagen de proceso nueva durante EXEC
\item SYS\_SENDSIG: Envia una señal a un proceso
\item SYS\_SIGRETURN: Señalizaci'on estilo POSIX
\item SYS\_KILL: Mata un proceso, señal enviada via Memory Manager
\item SYS\_ENDSIG: Finaliza luego de una señal KILL
\item SYS\_COPY: Pide un bloque de datos para ser copiado entre procesos
\item SYS\_VCOPY: Pide una serie de bloques de datos para ser copiados entre procesos
\item SYS\_GBOOT: Copia el par'ametro de booteo al un proceso
\item SYS\_MEM: Retorna el pr'oximo bloque libre de memoria f'isica
\item SYS\_UMAP: Computa la direccion f'isica de una direcci'on virtual.
\item SYS\_TRACE: Retorna una operaci'on de traza
\end{itemize}
	
\subsubsection{Memory Manager}
\begin{itemize}
\item FORK: Crea un nuevo proceso
\item EXIT: Termina un proceso
\item WAIT: Detiene un proceso a la espera de una señal
\item WAITPID: Detiene un proceso a la espera de una señal
\item BRK: Cambia el tamaño del segmento data
\item EXEC: Ejecuta un archivo
\item KILL: Envia señal a proceso, usualmente para matar al proceso
\item ALARM: Programa señal luego de un tiempo especificado
\item PAUSE: Detiene hasta señal
\item SIGACTION: Administra las señales
\item SIGSUSPEND: Suspende hasta señal
\item SIGPENDING: Reporta pendientes de señal
\item SIGMASK: Manipula la m'ascara de las señales
\item SIGRETURN: Se ejecuta cuando el MM termina manejo de señales. Sirve para restablecer contextos.
\item GETUID: Retorna id del usuario
\item GETGID: Retorna id del grupo
\item GETPID: Retorna id del proceso
\item SETUID: Setea id del usuario
\item SETGID: Setea id del grupo
\item SETSID: Crea una nueva sesi'on de un proceso
\item GETPGRP: Retorna el id del grupo del proceso
\item PTRACE: Traza del proceso
\item REBOOT: Apaga el sistema o reinicia
\item KSIG: Acepta señal que se origina en el Kernel
\end{itemize}

\subsubsection{File System}
\begin{itemize}
\item ACCESS: Determina accesibilidad hacia un archivo
\item CHDIR: Cambia el directorio del trabajo actual
\item CHMOD: Cambia el modo de un archivo
\item CHOWN: Cambia el dueño de un archivo
\item CHROOT: Cambia el directorio del usuario root
\item CLOSE: Borra un descriptor
\item CREAT: Crea un nuevo archivo
\item DUP: Duplica un descriptor
\item FCNTL: Ejecuta varias funciones relacionadas con el archivo descriptor
\item FSTAT: Retorna estado de un archivo abierto
\item IOCTL: Ejecuta varias funciones relacionadas con archivos especiales de tipo car'acter ( como son las terminales )
\item LINK: Crea un link a un archivo
\item LSEEK: Mueve puntero de lectura/escritura
\item MKDIR: Crea un directorio
\item MKNOD: Crea un nuevo inodo
\item MOUNT: Monta un file system
\item OPEN: Abre un archivo para lectura o escritura o crea un nuevo archivo
\item PIPE: Crea un canal de comunicaci'on entre procesos
\item READ: Lee entrada
\item RENAME: Renombra un archivo
\item RMDIR: Remueve un directorio
\item STAT: Retorna estado de la ruta de un archivo
\item STIME: Setea fecha y hora
\item SYNC: Actualiza buffers sucios y super-bloques
\item TIME: Obtiene fecha y hora
\item TIMES: Retorna informaci'on relacionada con los tiempos de un proceso
\item UMASK: Setea la m'ascara de un archivo de un proceso
\item UMOUNT: Desmonta un file system
\item UNLINK: Remueve una entrada de directorio
\item UTIME: Actualiza informaci'on relacionada con los tiempos de un proceso
\item WRITE: Escribe salida
\item UNPAUSE: Env'ia señal a proceso para ver si est'a suspendido
\item REVIVE: Marca un proceso suspendido como ejecutable
\end{itemize}


b) Instalamos Minix sobre una imagen .vhd.
'Esta fue creada con el entorno Virtua Pc 2004 de Microsoft. 
La intensi'on era generar una imagen que pueda ser corrida en dicha aplicaci'on dado que en sucesivos 
intentos de instalaci'on, el Minix acusaba un ''File System Panic'' y abortaba la misma.
Se us'o pues para la instalacion Qemu 4 con el Qemu Manager de Interfaz Gr'afica. Sin embargo, esta
versi'on present'o problemas al cargar el 'ultimo disco de instalaci'on y fue necesario utilizar la 
versi'on que presenta la p'agina de la materia para concluir exitosamente la misma. El resto de los
puntos fueron desarrollados ìntegramente sobre el Qemu 4.

P'asos para la instalaci'on
\begin{enumerate}
\item Bajar el Qemu 4 + Qemu Manager, versi'on para pendrives.

\verbºhttp://www.davereyn.co.uk/qem/qemumanager40.zipº

\item Bajar e instalar el Microsoft Virtual PC 2004 ( versi'on gratuita )

\item Microsoft Virtual PC $\rightarrow$ Archivo $\rightarrow$ Asistente para disco virtual $\rightarrow$ Siguiente $\rightarrow$
Crear un nuevo equipo virtual $\rightarrow$ Un disco duro virtual $\rightarrow$ Setear nombre y ubicaci'on $\rightarrow$
Tamaño Fijo $\rightarrow$ Setear tamaño 80MB $\rightarrow$ Finalizar.

\item Qemu Manager 4 $\rightarrow$ Crear una nueva m'aquina virtual $\rightarrow$ Setear nombre de m'aquina virtual $\rightarrow$ Sistema Operativo: \verbºLinux Distributionº, RAM requerida 4MB $\rightarrow$ Checkear \verbºUsar unidad virtual existenteº    $\rightarrow$ Seleccionar la imagen creada en 3 $\rightarrow$ Salvar maquina virtual.

\item Opcional (crear m'aquina virtual en Virtual PC ) $\rightarrow$ Asistente para nuevo equipo virtual $\rightarrow$
Crear un nuevo equipo virtual $\rightarrow$ Setear nombre y ubicaci'on $\rightarrow$ Setear Sistema Operativo:
\verbºOtroº $\rightarrow$ Ajustar RAM: 4MB $\rightarrow$ Utilizar un disco virtual existente  $\rightarrow$ Seleccionar la imagen creada en 3 $\rightarrow$
Finalizar

\item Usar el archivo 144M.dsk proveido por la c'atedra. Configurar m'aquina virtual 
(doble click en m'aquina creada en 4) $\rightarrow$ Configuraci'on de disco $\rightarrow$ Disco Floppy A: (fda), 
selecionar 144M.dsk $\rightarrow$ Checkear: \verbºBootear desde disco floppyº $\rightarrow$ Lanzar maquina virtual.

\item Ingresar \verbº=º en monitor de Minix.

\item Ingresar usuario root.

\item Modificar el archivo setup: \verbºmined /usr/bin/setupº

Reemplazar l'ineas:
\begin{verbatim}
	root = ${primary}a
	usr  = ${primary}c
\end{verbatim}

Por
\begin{verbatim}
	root = hd1
	usr  = hd2
\end{verbatim}
	
\item Ejecutar Setup $\rightarrow$ seleccionar layout $\rightarrow$ select device, presionar \"q\" (no modifica nada) $\rightarrow$
seleccionar hd0 $\rightarrow$ Seleccionar las particiones de hd1 y hd2 $\rightarrow$ Enter.

\item Finalizada la instalaci'on, apagar la m'aquina virtual $\rightarrow$ 

Deschequear: \verbºBootear desde disco floppyº


\item con el comando partir, generar las imagenes de \verbºUSR.TAZ, SYS.TAZ Y CMD.TAZº.
En l'inea de comando ejecutar en el directorio donde estan los archivos y el ejecutable:
partir [u] usr.taz
partir [s] sys.taz
partir [c] cmd.taz
Ubicar los archivos generados en carpeta media del Qemu

\item Reiniciar m'aquina virtual. 

\item Con \verb0ctrl+alt+20 se abre consola de Qemu. change fda u1.img.
Con \verb0ctrl+alt+10 se vuelve a Minix.

\item Ejecutar \verb0setup /usr0. Repetir 14 para cada vez que se pida el siguiente disco.

\item Repertir 14 y 15 para s1.img y con c1.img

Nota: La instalaci'on de archivo cmd.taz nunca se pudo completar con la versi'on de Qemu usada. 
Se intent'o varias veces con resultados adversos. Se utiliz'o el Qemu proveido por la c'atedra 
para la instalaci'on de este archivo.

\end{enumerate}

